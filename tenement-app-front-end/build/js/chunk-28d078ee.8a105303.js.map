{"version":3,"sources":["webpack:///./src/components/table-comb/index.vue?2acb","webpack:///src/components/table-comb/index.vue","webpack:///./src/components/table-comb/index.vue?64cd","webpack:///./src/components/table-comb/index.vue?ed2b","webpack:///./src/components/table-comb/index.vue?e819"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_t","attrs","model","searchModelDataBase","label-width","size","staticStyle","width","placeholder","prefix-icon","clearable","value","callback","$$v","$set","expression","_e","form","isOpenAdvancedSearch","margin-left","type","on","click","search","_v","$event","openAdvancedSearch","_s","directives","name","rawName","searchModelData","reset","ref","data","tableData","border","select","checkedOne","select-all","checkedAll","sort-change","tableSortChange","checkedItems","length","tag","mode","_l","item","key","customId","username","title","dispalyName","removeCheckedItem","href","removeAllCheckedItem","current-page","pagingInfo","currentPage","page-sizes","page-size","layout","total","totalRecord","size-change","handleSizeChange","current-change","fetchData","staticRenderFns","table_combvue_type_script_lang_js_","props","String","getAction","Function","getActionWhere","Object","removeAction","removeBatchAction","default","editPath","listPath","searchModel","searchModelBase","pagingConfig","autoFetch","Boolean","sortChange","loading","sortInfo","pageSize","computed","isShowBaseSearch","$scopedSlots","baseSearchForm","methods","_ref","column","prop","order","substr","selection","row","isExist","isChecked","some","push","i","splice","_this2","map","$refs","table","toggleRowSelection","j","initRecordChecked","edit","id","$router","path","$message","error","remove","_this","console","log","$msgbox","message","showCancelButton","confirmButtonText","cancelButtonText","then","action","res","code","success","$emit","catch","removeBatch","ids","warning","pageIndex","conditionObj","getPageVo","$env","$nextTick","hasOwnProperty","undefined","_key","_value","sort","assign","lodash","val","mounted","components_table_combvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_6ee557ee_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_6ee557ee_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-28d078ee.8a105303.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"m-table-comb\"},[_c('section',{staticClass:\"table-filter\"},[_c('div',{staticClass:\"controls\"},[_vm._t(\"controls\")],2),_c('el-form',{attrs:{\"model\":_vm.searchModelDataBase,\"label-width\":\"120px\",\"size\":\"small\"}},[(_vm.isShowBaseSearch)?_c('el-input',{staticStyle:{\"width\":\"160px\"},attrs:{\"placeholder\":\"请输入关键字\",\"prefix-icon\":\"el-icon-search\",\"clearable\":\"\"},model:{value:(_vm.searchModelDataBase.name),callback:function ($$v) {_vm.$set(_vm.searchModelDataBase, \"name\", $$v)},expression:\"searchModelDataBase.name\"}}):_vm._e(),_vm._t(\"baseSearchForm\",null,{form:this.searchModelDataBase}),(!_vm.isOpenAdvancedSearch)?_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]):_vm._e(),(_vm.searchModel)?_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":function($event){_vm.openAdvancedSearch()}}},[_vm._v(_vm._s(_vm.isOpenAdvancedSearch ? '关闭高级查询' : '高级查询'))]):_vm._e()],2)],1),_c('section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOpenAdvancedSearch),expression:\"isOpenAdvancedSearch\"}],staticClass:\"table-filter-advanced\"},[_c('el-form',{attrs:{\"model\":_vm.searchModelData,\"label-width\":\"120px\",\"size\":\"small\"}},[_vm._t(\"advancedSearchForm\",null,{form:this.searchModelData}),_c('div',{staticClass:\"form-controls\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.isOpenAdvancedSearch = false}}},[_vm._v(\"取消\")])],1)],2)],1),_c('section',{staticClass:\"table-content\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\"},on:{\"select\":_vm.checkedOne,\"select-all\":_vm.checkedAll,\"sort-change\":_vm.tableSortChange}},[_vm._t(\"tableColumns\")],2)],1),_c('section',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.checkedItems && this.checkedItems.length > 0),expression:\"this.checkedItems && this.checkedItems.length > 0\"}]},[_c('div',{staticClass:\"checked-items\"},[_c('transition-group',{attrs:{\"tag\":\"div\",\"name\":\"scale\",\"mode\":\"out-in\"}},_vm._l((this.checkedItems),function(item){return _c('span',{key:item[_vm.customId]},[_vm._v(_vm._s(item.username || item.name || item.title || item[_vm.dispalyName])+\" \"),_c('i',{on:{\"click\":function($event){_vm.removeCheckedItem(item)}}})])})),_c('a',{staticClass:\"clear-all\",attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":function($event){_vm.removeAllCheckedItem()}}},[_vm._v(\"清空\")])],1)]),_c('section',{staticClass:\"table-paging\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pagingInfo.currentPage,\"page-sizes\":[10, 20, 50, 100],\"page-size\":10,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagingInfo.totalRecord},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.fetchData}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"m-table-comb\">\r\n    <!--数据过滤和按钮组-->\r\n    <section class=\"table-filter\">\r\n      <div class=\"controls\">\r\n        <slot name=\"controls\"></slot>\r\n      </div>\r\n        <el-form :model=\"searchModelDataBase\" label-width=\"120px\" size=\"small\">\r\n        <el-input\r\n          placeholder=\"请输入关键字\"\r\n          prefix-icon=\"el-icon-search\"\r\n          clearable\r\n          v-model=\"searchModelDataBase.name\"\r\n          v-if=\"isShowBaseSearch\"\r\n          style=\"width: 160px;\">\r\n        </el-input>\r\n        <slot name=\"baseSearchForm\" :form=\"this.searchModelDataBase\"></slot>\r\n        <el-button type=\"primary\" @click=\"search\" v-if=\"!isOpenAdvancedSearch\" style=\"margin-left: 10px;\">查询</el-button>\r\n        <el-button @click=\"openAdvancedSearch()\" v-if=\"searchModel\" style=\"margin-left: 10px;\">{{ isOpenAdvancedSearch ? '关闭高级查询' : '高级查询' }}</el-button>\r\n      </el-form>\r\n    </section>\r\n    <!--高级查询-->\r\n    <section class=\"table-filter-advanced\" v-show=\"isOpenAdvancedSearch\">\r\n      <el-form :model=\"searchModelData\" label-width=\"120px\" size=\"small\">\r\n        <slot name=\"advancedSearchForm\" :form=\"this.searchModelData\"></slot>\r\n        <div class=\"form-controls\">\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"search\">查询</el-button>\r\n          <el-button size=\"small\" @click=\"reset\">重置</el-button>\r\n          <el-button size=\"small\" @click=\"isOpenAdvancedSearch = false\">取消</el-button>\r\n        </div>\r\n      </el-form>\r\n    </section>\r\n    <!--数据表格-->\r\n    <section class=\"table-content\">\r\n      <el-table\r\n        ref=\"table\"\r\n        :data=\"tableData\"\r\n        v-loading=\"loading\"\r\n        border\r\n        @select=\"checkedOne\"\r\n        @select-all=\"checkedAll\"\r\n        @sort-change=\"tableSortChange\"\r\n        style=\"width: 100%\">\r\n        <slot name=\"tableColumns\"></slot>\r\n      </el-table>\r\n    </section>\r\n    <!--多选数据视图-->\r\n    <section v-show=\"this.checkedItems && this.checkedItems.length > 0\">\r\n      <div class=\"checked-items\">\r\n        <transition-group tag=\"div\" name=\"scale\" mode=\"out-in\">\r\n          <span v-for=\"item in this.checkedItems\" :key=\"item[customId]\">{{ item.username || item.name || item.title || item[dispalyName] }} <i @click=\"removeCheckedItem(item)\"></i></span>\r\n        </transition-group>\r\n        <a href=\"javascript:void(0);\" class=\"clear-all\" @click=\"removeAllCheckedItem()\">清空</a>\r\n      </div>\r\n    </section>\r\n    <!--分页-->\r\n    <section class=\"table-paging\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"fetchData\"\r\n        :current-page=\"pagingInfo.currentPage\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :page-size=\"10\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"pagingInfo.totalRecord\">\r\n      </el-pagination>\r\n    </section>\r\n\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { clone } from 'lodash'\r\n\r\nexport default {\r\n  name: 'DataTableComb',\r\n  props: {\r\n    name: String,\r\n    getAction: Function,\r\n    getActionWhere: Object,\r\n    removeAction: Function,\r\n    removeBatchAction: Function,\r\n    //自定义id\r\n    customId:{\r\n      type: String,\r\n      default: 'id'\r\n    },\r\n    //显示给用户的名字\r\n    dispalyName:{\r\n      type: String,\r\n      default: 'name'\r\n    },\r\n    editPath: String,\r\n    listPath: String,\r\n    searchModel: Object,\r\n    searchModelBase: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          name: ''\r\n        }\r\n      }\r\n    },\r\n    pagingConfig: Object,\r\n    autoFetch: { // 是否自动加载数据\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    sortChange: Function\r\n  },\r\n  data () {\r\n    return {\r\n      loading: true, // 数据是否在加载中\r\n      tableData: [], // 表格的数据\r\n      checkedItems: [], // 选中的数据\r\n      isOpenAdvancedSearch: false, // 是否打开高级搜索\r\n      sortInfo: null,\r\n      pagingInfo: { // 分页信息\r\n        pageSize: 10,\r\n        currentPage: 1,\r\n        totalRecord: 0\r\n      },\r\n      searchModelDataBase: {},\r\n      searchModelData: {}\r\n    }\r\n  },\r\n  computed: {\r\n    isShowBaseSearch () {\r\n      return !this.$scopedSlots.baseSearchForm\r\n    }\r\n  },\r\n  methods: {\r\n    tableSortChange ({ column, prop, order }) {\r\n      if (this.sortChange) {\r\n        this.sortChange({ column, prop, order })\r\n      } else if (column) {\r\n        this.sortInfo = prop + '_' + order.substr(0, 3) // ascending descending\r\n      } else {\r\n        this.sortInfo = null\r\n      }\r\n      this.fetchData()\r\n    },\r\n    /**\r\n       * 单个选中\r\n       */\r\n    checkedOne (selection, row) {\r\n      let customId = this.customId\r\n      let isExist\r\n      let isChecked = selection.some(item => {\r\n        return item[customId] === row[customId]\r\n      })\r\n      // findIndex(selection, row) >= 0;\r\n      // 判断是否选中\r\n      if (!isChecked) {\r\n        for (let i = 0; i < this.checkedItems.length; i++) {\r\n          if (this.checkedItems[i][customId] === row[customId]) {\r\n            this.checkedItems.splice(i, 1)\r\n            break\r\n          }\r\n        }\r\n      } else {\r\n        // 判断是否存在\r\n        isExist = this.checkedItems.some(item => {\r\n          return item[customId] === row[customId]\r\n        })\r\n        // findIndex(this.checkedItems, row) >= 0;\r\n        if (!isExist) {\r\n          this.checkedItems.push(row)\r\n        }\r\n      }\r\n    },\r\n    /**\r\n       * 全选\r\n       */\r\n    checkedAll (selection) {\r\n      if (selection.length > 0) {\r\n        selection.map(item => {\r\n          this.checkedOne(selection, item) // 逐个选中\r\n        })\r\n      } else {\r\n        this.tableData.map(item => {\r\n          this.checkedOne([], item) // 逐个取消\r\n        })\r\n      }\r\n    },\r\n    /**\r\n       * 删除选中项\r\n       */\r\n    removeCheckedItem (item) {\r\n      let customId = this.customId;\r\n      for (let i = 0; i < this.checkedItems.length; i++) {\r\n        if (this.checkedItems[i][customId] === item[customId]) {\r\n          this.$refs.table.toggleRowSelection(item, false)\r\n          for (let j = 0; j < this.tableData.length; j++) {\r\n            if (this.tableData[j][customId] === item[customId]) {\r\n              this.$refs.table.toggleRowSelection(this.tableData[j], false)\r\n              break\r\n            }\r\n          }\r\n          this.checkedItems.splice(i, 1)\r\n          break\r\n        }\r\n      }\r\n    },\r\n    /**\r\n       * 删除所有选中项\r\n       */\r\n    removeAllCheckedItem () {\r\n      let customId = this.customId;\r\n      for (let i = 0; i < this.checkedItems.length; i++) {\r\n        this.$refs.table.toggleRowSelection(this.checkedItems[i], false)\r\n        for (let j = 0; j < this.tableData.length; j++) {\r\n          if (this.tableData[j][customId] === this.checkedItems[i][customId]) {\r\n            this.$refs.table.toggleRowSelection(this.tableData[j], false)\r\n            break\r\n          }\r\n        }\r\n        this.checkedItems.splice(i, 1)\r\n        i--\r\n      }\r\n    },\r\n    /**\r\n       * 初始化选中项\r\n       */\r\n    initRecordChecked () {\r\n      let customId = this.customId;\r\n      // 很奇怪，checkedItems 和 tableData 的值一样，但是就是用不了checkedItems 的数据\r\n      for (let i = 0; i < this.checkedItems.length; i++) {\r\n        for (let j = 0; j < this.tableData.length; j++) {\r\n          if (this.checkedItems[i][customId] === this.tableData[j][customId]) {\r\n            this.$refs.table.toggleRowSelection(this.tableData[j], true)\r\n            break\r\n          }\r\n        }\r\n      }\r\n    },\r\n    /**\r\n       * 打开高级搜索\r\n       */\r\n    openAdvancedSearch () {\r\n      this.isOpenAdvancedSearch = !this.isOpenAdvancedSearch\r\n    },\r\n    /**\r\n       * 编辑\r\n       */\r\n    edit (id) {\r\n      if (!this.editPath) {\r\n        this.$message.error('编辑失败，因为对应的Action没有设置')\r\n        return\r\n      }\r\n      this.$router.push({ path: this.editPath + '/' + id })\r\n    },\r\n    /**\r\n       * 删除\r\n       */\r\n    remove (id) {\r\n      let customId = this.customId\r\n      let _this = this\r\n      console.log(_this)\r\n      if (!_this.removeAction) {\r\n        _this.$message.error('删除失败，因为对应的Action没有设置')\r\n        return\r\n      }\r\n\r\n      this.$msgbox({\r\n        title: '提示',\r\n        message: `确定要删除该数据？`,\r\n        showCancelButton: true,\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消'\r\n      }).then(action => {\r\n        if (action === 'confirm') {\r\n          _this.loading = true\r\n          _this.removeAction(id).then(res => {\r\n            if (res.code === 0) {\r\n              for (let i = 0; i < _this.tableData.length; i++) {\r\n                if (_this.tableData[i][customId] === id) {\r\n                  _this.tableData.splice(i, 1)\r\n                  i++\r\n                }\r\n              }\r\n              if(_this.tableData.length>0){\r\n                _this.fetchData();\r\n              }else{\r\n                _this.fetchData(_this.pagingInfo.currentPage-1 || 1);\r\n              }\r\n              _this.$message.success(`删除数据成功`)\r\n              _this.$emit('on-remove-success')\r\n            } else {\r\n              _this.$message.error(res.message)\r\n            }\r\n\r\n            _this.loading = false\r\n          }).catch(() => {\r\n            _this.$message.error(`删除数据失败`)\r\n          })\r\n        }\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    /**\r\n       * 批量删除\r\n       */\r\n    removeBatch () {\r\n      let _this = this\r\n      let customId =this.customId\r\n      let ids = this.checkedItems.map(item => {\r\n        return item[customId]\r\n      })\r\n\r\n      if (!this.removeBatchAction) {\r\n        this.$message.error('删除失败，因为对应的Action没有设置')\r\n        return\r\n      }\r\n\r\n      if (ids.length === 0) {\r\n        _this.$message.warning('请选择数据')\r\n        return\r\n      }\r\n\r\n      this.$msgbox({\r\n        title: '提示',\r\n        message: `确定要删除选中的数据？`,\r\n        showCancelButton: true,\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消'\r\n      }).then(action => {\r\n        if (action === 'confirm') {\r\n          _this.loading = true\r\n          _this.removeBatchAction(ids).then(() => {\r\n            // 删除当前表格里面的数据\r\n            for (let i = 0; i < _this.tableData.length; i++) {\r\n              for (let j = 0; j < ids.length; j++) {\r\n                if (_this.tableData[i][customId] === ids[j]) {\r\n                  _this.tableData.splice(i, 1)\r\n                  i--\r\n                  break\r\n                }\r\n              }\r\n            }\r\n            // 删除选中的数据\r\n            _this.checkedItems = []\r\n\r\n            _this.loading = false\r\n            _this.$message.success(`删除数据成功`)\r\n            _this.$emit('on-remove-success')\r\n          }).catch(() => {\r\n            _this.$message.error(`删除数据失败`)\r\n          })\r\n        }\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    /**\r\n       * 获取数据\r\n       * @param pageIndex\r\n       */\r\n    fetchData (pageIndex) {\r\n      let _this = this\r\n\r\n      if (!this.getAction) {\r\n        this.$message.error('获取数据失败，因为对应的Action没有设置')\r\n        return\r\n      }\r\n\r\n      _this.pagingInfo.currentPage = pageIndex || _this.pagingInfo.currentPage || 1\r\n      _this.loading = true\r\n\r\n      let conditionObj = this.getPageVo();\r\n      // 请求数据\r\n      this.getAction(conditionObj, _this.pagingInfo).then(res => {\r\n        _this.$env === 'development' && console.log('[DEBUG] tableData:')\r\n        _this.$env === 'development' && console.log(res)\r\n        _this.tableData = res.data.data\r\n        _this.pagingInfo.totalRecord = res.data.totalRecord || res.data.data.length\r\n        // 设置已选择项目\r\n        _this.$nextTick(() => {\r\n          _this.initRecordChecked()\r\n        })\r\n\r\n        _this.loading = false\r\n      }).catch(error => {\r\n        console.error(error)\r\n        _this.$message.error(`获取数据列表失败`)\r\n        _this.loading = false\r\n      })\r\n    },\r\n    /**\r\n     * 获取请求的参数\r\n     * @param pageIndex\r\n     */\r\n    getPageVo(pageIndex){\r\n      let _this = this\r\n      let conditionObj = {}\r\n      // 基础搜索\r\n      for (let key in this.searchModelDataBase) {\r\n        if (this.searchModelDataBase.hasOwnProperty(key)) {\r\n          let value = this.searchModelDataBase[key]\r\n          if (value !== undefined && value !== '' && value.length !== 0) {\r\n            conditionObj[key] = this.searchModelDataBase[key]\r\n          }\r\n        }\r\n      }\r\n      // 高级搜索\r\n      if (this.isOpenAdvancedSearch) {\r\n        for (let key in this.searchModelData) {\r\n          if (this.searchModelData.hasOwnProperty(key)) {\r\n            let value = this.searchModelData[key]\r\n            if (value !== undefined && value !== '' && value.length !== 0) {\r\n              conditionObj[key] = this.searchModelData[key]\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // 添加排序条件\r\n      if (_this.sortInfo) {\r\n        conditionObj.sort = _this.sortInfo\r\n      }\r\n      // 添加自定义条件\r\n      Object.assign(conditionObj, this.getActionWhere)\r\n      return conditionObj;\r\n    },\r\n    /**\r\n       * 重置查询条件\r\n       */\r\n    reset () {\r\n      // this.searchModelDataBase = clone(this.searchModelBase)\r\n      this.searchModelData = clone(this.searchModel)\r\n    },\r\n    /**\r\n       * 分页改变事件\r\n       */\r\n    handleSizeChange (val) {\r\n      this.pagingInfo.pageSize = val\r\n      this.fetchData()\r\n    },\r\n    /**\r\n       * 查找, 点击事件\r\n       */\r\n    search () {\r\n      this.fetchData()\r\n    }\r\n  },\r\n  mounted () {\r\n    let _this = this\r\n    if (this.autoFetch) {\r\n      _this.fetchData()\r\n    } else {\r\n      _this.loading = false\r\n    }\r\n    this.searchModelData = clone(this.searchModel)\r\n    this.searchModelDataBase = clone(this.searchModelBase)\r\n    Object.assign(this.pagingInfo, this.pagingConfig)\r\n  }\r\n}\r\n</script>\r\n\r\n<style type=\"text/scss\" scoped>\r\n  /* --------------------------------------------------------------------------\r\n     组合表格补充样式\r\n     -------------------------------------------------------------------------- */\r\n  /* 过滤 */\r\n  .m-table-comb .table-filter { padding-bottom: 20px; }\r\n  .m-table-comb .table-filter .controls { float: right; }\r\n  .m-table-comb .table-filter .controls > a,\r\n  .m-table-comb .table-filter .controls > button { margin-left: 5px; }\r\n  .m-table-comb .table-paging { padding: 30px; text-align: center; }\r\n  /* 高级搜索 */\r\n  .m-table-comb .table-filter-advanced { margin-bottom: 20px; padding: 16px 10px; border: 1px solid #cdd7ef; border-radius: 5px; background-color: #edf7ff; }\r\n  .m-table-comb .table-filter-advanced .form-controls { text-align: right; }\r\n  /* 选中项目 */\r\n  .m-table-comb .checked-items { position: relative; margin-top: 10px; padding: 8px 50px 0 8px; border: 1px solid #cdd7ef; border-radius: 5px; background-color: #edf7ff; }\r\n  .m-table-comb .checked-items span { position: relative; display: inline-block; margin: 0 8px 8px 0; padding: 0 28px 0 6px; height: 22px; border-radius: 3px; background-color: #4db3ff; color: #fff; font-size: 13px; line-height: 22px; }\r\n  .m-table-comb .checked-items span i { position: absolute; top: 0; right: 0; display: inline-block; width: 22px; height: 22px; border-left: solid 1px #3da3df; border-radius: 0 3px 3px 0; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEUAAAD///////////84wDuoAAAAA3RSTlMAoDByqEibAAAAKUlEQVQI12NABw1MDAxMF9gbGBhKZIFc2RIgwX4BTEC4IAmIErBiNAAAMaMHqaYF4lAAAAAASUVORK5CYII=) 50% 50%; text-align: center; font-style: normal; cursor: pointer; -webkit-transition: all .3s; transition: all .3s; }\r\n  .m-table-comb .checked-items span i:hover { background-color: #3da3ef; }\r\n  .m-table-comb .checked-items .clear-all { position: absolute; top: 8px; right: 10px; color: #20a0ff; text-decoration: none; font-size: 14px; line-height: 22px; }\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6ee557ee&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6ee557ee&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ee557ee\",\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6ee557ee&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6ee557ee&scoped=true&lang=css&\""],"sourceRoot":""}