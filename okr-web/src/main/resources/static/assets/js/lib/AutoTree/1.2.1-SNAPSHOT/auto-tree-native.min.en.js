(function(B,n){B.autoTree=B.autoTree||{defaultConfig:{}};var P={event:{actionEvents:"click.auto-tree mousedown.auto-tree focus.auto-tree",inputEvents:"keyup.auto-tree",lossEventsForWindow:"mousedown.auto-tree scroll.auto-tree",lossEventsForSelf:"blur.auto-tree"},view:{height:0,maxHeight:200,width:0,maxWidth:160,isSelectedFirstRow:true,isRememberValue:true,isAllowEmpty:true,isOnActionIgnoreFilter:true,isAllowReadonlyAction:true,bindFill:{},localData:[],emptyRecordsHtml:"没有数据！",inputFilterFieldNames:[],separator:",",viewUniqueFieldName:"",zIndex:9999,positionRefer:null,dropDownContainer:null,autoLoad:true,autoWidthPadding:-1,autoHeightPadding:-1,widthRefer:null,dropDownWithin:"body",checkedSyncValue:true,showClearButton:false},callback:{beforeAction:null,afterAction:null,beforeLose:null,afterLose:null,beforeAjaxBeforeSend:null,beforeAjaxSuccess:null,afterAjaxError:null,beforeInput:null,afterInput:null,setRequestData:null,afterLoad:null},async:{url:"",type:"POST",dataType:"json",dataSourceType:"onceRemote",async:true,data:{}},input:{queryDelay:200,enableInputAction:true,inputQueryParamName:"inputValue",enableAutoComplete:false},treeConfig:{check:{enable:false},callback:{beforeClick:function(T,S,R){return true},onClick:function(R,T,S){},beforeCheck:function(S,R){return true},onCheck:function(R,T,S){}}}};var y={isDropDownShow:false,_dropDown:null,_dataPanel:null,_isBindEventDataPanel:false,_originalDataStore:[],_inputFilterFieldNames:null,_isLoaded:false,_actionStop:true,_currentFocusNode:null,_focusNodeIndex:-1,_isCurrentValueFromTree:false,_rememberValue:"",_justReload:false,_isMouseOutDropDown:true,_isMouseOverClearBtn:false,_isTreeInit:false,_checkedNodeStore:{}};B.fn.AutoTree=function(S){if(typeof S==="string"){var T=F(B.autoTree,S);if(!T){alert("AutoTree method not found:"+S);return}else{if(S.indexOf("_")===0){alert("AutoTree don't call the private method:"+S);return}}var R=B.makeArray(arguments).slice(1);return T.apply(this,R)}return this.each(function(){if(this.renderCompleted){return}var V=this,U;if(!B(V).is("input:text")&&!B(V).is("textarea")){alert("Non(input:text)controls can't initialize!");return}V.p=B.extend(true,{},{id:V.id?V.id:"_"+parseInt((Math.random()*100000000))},y,B.autoTree);U=V.p;V.id=U.id;V.componentType="AutoTree";U.event=B.extend(true,{},P.event,B.autoTree.defaultConfig.event,S.event);U.view=B.extend(true,{},P.view,B.autoTree.defaultConfig.view,S.view);U.callback=B.extend(true,{},P.callback,B.autoTree.defaultConfig.callback,S.callback);U.async=B.extend(true,{},P.async,B.autoTree.defaultConfig.async,S.async);U.input=B.extend(true,{},P.input,B.autoTree.defaultConfig.input,S.input);U.treeConfig=B.extend(true,{},P.treeConfig,B.autoTree.defaultConfig.treeConfig,S.treeConfig);var W=B(U.view.dropDownContainer);if(W&&W.length>0&&W[0].id===(U.id+"DropDown")&&App&&App.hasOwnProperty("src")&&App.src===true){z("配置项p.view.dropDownContainer="+U.view.dropDownContainer+"，对应的元素id不能命名为（"+U.id+"DropDown）建议改为（"+U.id+"Container）")}if(U.input.enableAutoComplete){V.autocomplete="on"}else{V.autocomplete="off"}u.call(V);V.renderCompleted=true})};B.extend(B.autoTree,{triggerAction:function(R){B(this).each(function(){var U=this,T=U.p,S=B(U);if(!S.prop("disabled")){if(!S.prop("readonly")||T.view.isAllowReadonlyAction){if(!T._isLoaded){N.call(U,R)}else{T.showDropDown.call(U,true);window.event.cancelBubble=true;window.event.stopPropagation()}}}})},showDropDown:function(R){B(this).each(function(){var W=this,V=W.p,U=B(W),T=V._dropDown,S;V.isDropDownShow=R;if(T==null){return}if(R){if(V.view.dropDownContainer){e.call(W)}else{if(U.length===0||U.is(":hidden")){return}T.css({left:"-9999px",top:"-9999px",position:"absolute","z-index":V.view.zIndex,width:V.view.width,height:V.view.height,overflow:"auto"});T.show(function(){e.call(W);window.setTimeout(function(){if(B("#"+V.id).length===0){T.hide()}else{S=I.call(W);T.positioner({my:"left top",at:"left bottom",of:S,collision:"flip flip"})}},0)})}}else{if(V.view.isRememberValue===true&&(V.view.isAllowEmpty===false||B.trim(U.val()).length!==0)){if(V._isCurrentValueFromDataGrid===false){U.val(V._rememberValue);V._justReload=true;if(!V.view.isOnActionIgnoreFilter){f.call(W,U.val())}else{f.call(W,"")}V._isAlreadyRemember=false}}if(V.view.dropDownContainer){f.call(W,"");V.showDropDown.call(W,true)}else{T.css({left:"-9999px",top:"-9999px",position:"absolute","z-index":-9999}).hide()}}})},hideDropDown:function(){var S=this,R=S.p;R._actionStop=true;R.showDropDown.call(S,false)},showLoadingBar:function(){var V=this,U=V.p,T=B(V),S=T.offset().top,R=T.offset().left;if(U._loadingBar.is(":hidden")){U._loadingBar.css({top:-9999,left:-9999}).show(function(){B(this).css({top:S+"px",left:R+"px",display:"block","z-index":9999})})}},hideLoadingBar:function(){if(!this.p._loadingBar.is(":hidden")){this.p._loadingBar.hide(function(){B(this).css({display:"none","z-index":-9999})})}},getTreeId:function(){return this.p.id+"Tree"},getTreeObj:function(){var R=null;B(this).each(function(){var U=this,T=U.p,S=T.getTreeId.call(U);if(!T._isTreeInit){a.call(U);B.fn.zTree.init(B("#"+S),T.treeConfig);T._isTreeInit=true}R=B.fn.zTree.getZTreeObj(S)});return R},getTreeSetting:function(){var R={};B(this).each(function(){var T=this,S=T.p;R=S.getTreeObj.call(T).setting});return R},showTreeNodes:function(S,R){return B(this).each(function(){var Z=this,Y=Z.p,W=Y.getTreeObj.call(Z),V=W.setting,U,X,T;for(T=0;T<S.length;T++){U=S[T];X=U[V.data.key.children];if(X&&X.length>0){if(R){Y.showTreeNodes.call(Z,X,true)}else{Y.hideTreeNodes.call(Z,X)}}if(R){W.showNode(U)}else{W.hideNode(U)}}})},hideTreeNodes:function(R){return B(this).each(function(){this.p.showTreeNodes.call(this,R,false)})},getCheckedNodes:function(){var R=[];B(this).each(function(){var U=this,T=U.p,S;for(S in T._checkedNodeStore){R.push(T._checkedNodeStore[S])}});return R},getNodes:function(){var R=[];B(this).each(function(){var U=this,T=U.p,S=T.getTreeObj.call(U);R=S.getNodes()});return R},setCheckedNodes:function(R){return B(this).each(function(){var X=this,W=X.p,V,Y,S,U=W.getTreeObj.call(X),T;if(W.treeConfig.check.enable&&R&&R.length>0&&U){V=R.split(W.view.separator);W._checkedNodeStore={};U.checkAllNodes(false);for(S=0;S<V.length;S++){Y=V[S];T=U.getNodeByParam(W.view.viewUniqueFieldName,Y);if(T&&!B.isEmptyObject(T)){U.checkNode(T,true,false,false);W._checkedNodeStore[Y]=T}}if(W.view.checkedSyncValue){C.call(X)}}})},resetCheckedNodes:function(){return B(this).each(function(){var S=this,R=this.p.getTreeObj.call(this);this.p._checkedNodeStore={};R.checkAllNodes(false);C.call(S)})},checkAllNodes:function(){return B(this).each(function(){var W=this,V=this.p,T=this.p.getTreeObj.call(this),S,U,R;T.checkAllNodes(true);S=V.getNodes.call(W);for(R=0;R<S.length;R++){U=S[R];V._checkedNodeStore[U[V.view.viewUniqueFieldName]]=U}C.call(W)})},removeAllNodes:function(){return B(this).each(function(){var U=this,T=U.p,S=T.getNodes.call(U),R;for(R=S.length-1;R>=0;R--){T.removeNode.call(U,S[R])}})},removeNode:function(R){return B(this).each(function(){var U=this,T=U.p,S=T.getTreeObj.call(U);delete T._checkedNodeStore[R[T.view.viewUniqueFieldName]];S.removeNode(R)})},addNode:function(S,R,T){return B(this).each(function(){var W=this,V=W.p,U=V.getTreeObj.call(W);U.addNodes(R,S,T)})},destroy:function(){B(this).each(function(){var V=this,U=V.p,T=B(V),S,R=d.call(V,U.event.lossEventsForWindow,U.id);T.off(U.event.actionEvents+U.id);T.off(U.event.inputEvents+U.id);B(window.document).off(R);T.off(U.event.lossEventsForSelf+U.id);U._dropDown.off("mouseover.auto-tree"+U.id);U._dropDown.off("mouseout.auto-tree"+U.id);S=U.getTreeObj.call(V);S.destroy();V.renderCompleted=false;V.p=null})},reload:function(){return B(this).each(function(){var S=this,R=S.p;R._justReload=true;b.call(S)})},clearValue:function(){return B(this).each(function(){var U=this,T=U.p,S=B(U),V=T.view.bindFill,R;if(T.view.showClearButton){if(B.trim(S.val()).length>0){if(!B.isEmptyObject(V)){for(R in V){if(V[R]){B(R).val("")}}}else{S.val("")}}if(T.treeConfig.check.enable){T.resetCheckedNodes.call(U)}v.call(U)}})}});var F=function(X,W){var S,V,R=[],T;if(typeof W==="function"){return W(X)}S=X[W];if(S===n){try{if(typeof W==="string"){R=W.split(".")}T=R.length;if(T){S=X;while(S&&T--){V=R.shift();S=S[V]}}}catch(U){}}return S},u=function(){B(this).each(function(){var U=this,T=B(U),S=U.p,R;R=d.call(U,S.event.lossEventsForWindow,S.id);T.off(S.event.actionEvents+S.id);T.on(S.event.actionEvents+S.id,function(V){N.call(U,V);H.call(U)});T.off(S.event.inputEvents+S.id);T.on(S.event.inputEvents+S.id,o);B(window.document).off(R);B(window.document).on(R,function(){g.apply(U,arguments)});T.off(S.event.lossEventsForSelf+S.id);T.on(S.event.lossEventsForSelf+S.id,function(V){g.apply(U,arguments);v.call(U,V)});l.call(U);if(S._dropDown===null){t.call(U)}if(T.val()&&S.view.isRememberValue){S._isCurrentValueFromTree=true;S._isAlreadyRemember=true;S._rememberValue=T.val()}if(S.view.dropDownContainer&&S.view.autoLoad){S.triggerAction.call(U)}})},d=function(R,T){var S=R,U;if(B.trim(R).length>0){U=R.split(" ");if(B.isArray(U)){S=U.join(T+" ");S+=T+" "}}return S},e=function(){return B(this).each(function(){var S=this,R=S.p;if(R._hasResize!==true||R.view.dropDownContainer==null){if(R.view.widthRefer){R.view.width=i.call(S)}R._dropDown.css({width:R.view.width});R._hasResize=true}})},f=function(U){var T=this,S=T.p,R=U?U:"";switch(S.async.dataSourceType){case"remote":case"onceRemote":case"local":p.call(T,R);S.hideLoadingBar.call(T);if(!S._justReload){S.showDropDown.call(T,true)}else{S._justReload=false}S._isLoaded=true;break}},j=function(R){B("a.autoTree-node-selected").removeClass("autoTree-node-selected");B("#"+R.tId+"_a").addClass("autoTree-node-selected")},I=function(){var V=this,U=B(V),T=V.p,S=T.view.positionRefer,R;if(B.isFunction(S)){R=S.call(V);R=(R&&R.length>0)?R:U}else{R=B(S);R=(R&&R.length>0)?R:U}return R},i=function(){var T=this,S=T.p,R=S.view.widthRefer;if(B.isFunction(R)){return R.call(T)}else{return R}},l=function(){var S=this,R=S.p;if(R.view.width===0){if(R.view.autoWidthPadding>0&&R.view.dropDownContainer){R.view.width=B.oui.utils.element.getWidthToRight(R.view.dropDownContainer,R.view.autoWidthPadding)}else{if(R.view.widthRefer){R.view.width=i.call(S)}else{R.view.width=R.view.maxWidth}}}if(R.view.height===0){if(R.view.autoHeightPadding>-1&&R.view.dropDownContainer){R.view.height=B.oui.utils.element.getHeightToBottom(R.view.dropDownContainer,R.view.autoHeightPadding)}else{R.view.height=R.view.maxHeight}}},E=function(){var S=this,R=S.p,T=R.id+"LoadingBar";R._loadingBar=B("#"+T);if(R._loadingBar&&R._loadingBar.length>0){}else{R._loadingBar=B('<div id="'+T+'" style="display: none;position: absolute;top: 0;left: 0;"><div class="autoTree-loadingbar-img"></div></div>');B(document.body).append(R._loadingBar)}},J=function(){var T=this,S=T.p,R=S.id+"ClearBtn";S._clearBtn=B("#"+R);if(S._clearBtn&&S._clearBtn.length>0){}else{S._clearBtn=B('<div id="'+R+'" style="background-color: #FFFFFF;height:18px;width:18px;display: none;position: absolute;top: 0;left: 0;" onclick="$(\'#'+S.id+"').AutoTree('clearValue');\"><div class=\"autoTree-clear-img\"></div></div>");B(document.body).append(S._clearBtn);S._clearBtn.off("mouseover.auto-combobox").on("mouseover.auto-combobox"+S.id,function(){S._isMouseOverClearBtn=true}).off("mouseout.auto-combobox").on("mouseout.auto-combobox"+S.id,function(){S._isMouseOverClearBtn=false})}},H=function(){var W=this,U=W.p,Y=B(W);if(U._clearBtn&&U._clearBtn.length>0&&B.trim(Y.val()).length>0){var X=Y.offset().top,S=Y.offset().left,aa=Y.outerHeight(),V=Y.outerWidth(),Z=18,R=12,T=(aa-Z)/2;if(U._clearBtn&&U._clearBtn.length>0){U._clearBtn.css({top:(X+T)+"px",left:(S+V-Z)+"px",display:"block"}).show().find("div.autoTree-clear-img").css({position:"relative",top:((Z-R)/2)+"px",left:((Z-R)/2)+"px"})}}},v=function(){var S=this,R=S.p;if(R._clearBtn&&R._clearBtn.length>0){if(R._isMouseOverClearBtn===false){R._clearBtn.hide()}if(event&&event.type==="click"){R._clearBtn.hide()}}},o=function(S){var W=this,T=W.p,ab=B(W),U=T.getTreeObj.call(W),af,V,ad,ac=T.view.bindFill;if(B.isFunction(T.callback.beforeInput)&&!T.callback.beforeInput.call(W,S)){return}if(S&&S.keyCode){if((S.keyCode>=48&&S.keyCode<=57)||(S.keyCode>=65&&S.keyCode<=90)||S.keyCode===8||S.keyCode===32||S.keyCode===46||(S.keyCode>=96&&S.keyCode<=111)||(S.keyCode>=186&&S.keyCode<=192)||(S.keyCode>=219&&S.keyCode<=222)){T._isCurrentValueFromTree=false;if(T.input.enableInputAction){window.clearTimeout(T._inputQueryTimeobj);T._inputQueryTimeobj=window.setTimeout(function(){if(T.treeConfig.check.enable){var ag=ab.val().substring(ab.val().lastIndexOf(T.view.separator)+1,ab.val().length);f.call(W,ag)}else{f.call(W,ab.val())}if(T.view.showClearButton){if(B.trim(ab.val()).length>0){H.call(W)}else{v.call(W)}}},T.input.queryDelay)}if(T.treeConfig.check.enable&&S.keyCode===8){var aa=ab.val().split(T.view.separator),ae,Z,Y;if(aa&&aa.length>0){for(ae in T._checkedNodeStore){Y=false;for(Z=0;Z<aa.length;Z++){if(ae===aa[Z]){Y=true;break}}if(!Y){delete T._checkedNodeStore[ae]}}U.checkAllNodes(false);for(ae in T._checkedNodeStore){U.checkNode(T._checkedNodeStore[ae],true,false,false)}}else{T._checkedNodeStore={}}if(T.view.checkedSyncValue){C.call(W)}}}if(S.keyCode===37||S.keyCode===38||S.keyCode===39||S.keyCode===40){ad=B("#"+T.getTreeId.call(W),T._dataPanel);if(!T.isDropDownShow){T.showDropDown.call(W,true)}var R=q.call(W);if(R.length>0){T._treeNodeHeight=T._treeNodeHeight>0?T._treeNodeHeight:B("#"+R[0].tId+"_a").height();if(S.keyCode===40||S.keyCode===38){if(S.keyCode===40){if(T._focusNodeIndex===-1){T._focusNodeIndex=0}else{T._focusNodeIndex+=1;if(T._focusNodeIndex===R.length){T._focusNodeIndex=0}}if(T._focusNodeIndex>R.length){T._focusNodeIndex=0}T._currentFocusNode=R[T._focusNodeIndex]}if(S.keyCode===38){if(T._focusNodeIndex===-1){T._focusNodeIndex=R.length-1}else{T._focusNodeIndex-=1;if(T._focusNodeIndex===-1){T._focusNodeIndex=R.length-1}}if(T._focusNodeIndex>R.length){T._focusNodeIndex=0}T._currentFocusNode=R[T._focusNodeIndex]}ad[0].scrollTop=(T._treeNodeHeight*T._focusNodeIndex);j.call(W,T._currentFocusNode)}if((S.keyCode===37||S.keyCode===39)&&T._currentFocusNode){af=T._currentFocusNode.children?T._currentFocusNode.children:null;if(S.keyCode===39){if(T._currentFocusNode.isParent&&af&&af.length>0){U.expandNode(T._currentFocusNode,true,false,false,true)}}if(S.keyCode===37){if(T._currentFocusNode.isParent&&af&&af.length>0){U.expandNode(T._currentFocusNode,false,false,false,true)}}}}}if(S.keyCode===13){if(!T.isDropDownShow){return}var X=T._dataPanel.find("a.autoTree-node-selected[treenode_a]");if(X&&X.length==1){m.call(W,X,S)}}}if(B.trim(ab.val()).length===0){for(V in ac){if(ac[V]&&ac.hasOwnProperty(V)){B(V).val("")}}}if(B.isFunction(T.callback.afterInput)){T.callback.afterInput.call(W,S)}},g=function(R){var U=R?R.target:{},T=this,S=T.p;if(U==T&&R.type!=="blur"){return}if(S==null){return}if(!S.isDropDownShow||S.view.dropDownContainer){return}if(S.callback.beforeLose&&!S.callback.beforeLose.call(T,R)){return}if(!S._isMouseOutDropDown){return}S.hideLoadingBar.call(T);S.hideDropDown.call(T);if(S.callback.afterLose){S.callback.afterLose.call(T,R)}R.stopPropagation()},A=function(){var S=this,R=S.p;if(R._isBindEventDropDown){return}R._dropDown.off("mouseover.auto-tree"+R.id);R._dropDown.off("mouseout.auto-tree"+R.id);R._dropDown.on("mouseover.auto-tree"+R.id,function(T){k.call(S,T)});R._dropDown.on("mouseout.auto-tree"+R.id,function(T){K.call(S,T)});R._isBindEventDropDown=true},k=function(R){var T=this,S=T.p;S._isMouseOutDropDown=false;R.stopPropagation()},K=function(R){var T=this,S=T.p;S._isMouseOutDropDown=true;R.stopPropagation()},C=function(){var U=this,T=U.p,R,S="";for(R in T._checkedNodeStore){S+=(R+T.view.separator)}if(T.view.isRememberValue){T._isCurrentValueFromTree=false;T._isAlreadyRemember=true;T._rememberValue=S}},x=function(R){var Y=this,X=Y.p,U,T,W=0,V,S;for(U=0;U<R.length;U++){V=R[U];W=0;for(T=0;T<R.length;T++){S=R[T];if(V[X.view.viewUniqueFieldName]===S[X.view.viewUniqueFieldName]){W++}}if(W>=2){if(console&&console.warn){console.warn((B.oui.utils.string.format(B.autoTree.i18n.info.keepTheLastOneNodeData,V[X.view.viewUniqueFieldName])))}}}},b=function(){var S=this,R=S.p;B(S).each(function(){switch(R.async.dataSourceType){case"remote":c.call(S);break;case"onceRemote":s.call(S);break;case"local":Q.call(S);break}})},c=function(){var S=this,R=S.p;R.showLoadingBar.call(S);w.call(S)},s=function(){w.call(this)},w=function(){var S=this,R=S.p;if(B.isFunction(R.callback.setRequestData)){R.callback.setRequestData.call(S,R.async.data)}B.ajax(B.extend({},{success:function(U,T,V){h.call(S,U,T,V)},error:function(V,T,U){M.call(S,V,T,U)},beforeSend:function(U,T){return G.call(S,U,T)}},R.async))},G=function(V,S){var U=this,T=U.p,R=true;if(B.isFunction(T.callback.beforeAjaxBeforeSend)){R=T.callback.beforeAjaxBeforeSend.call(U,V,S)}T.showLoadingBar.call(U);return R},h=function(U,R,V){var T=this,S=T.p;if(B.isFunction(S.callback.beforeAjaxSuccess)){S.callback.beforeAjaxSuccess.call(T,U,R,V)}if(!B.isArray(U)){M.call(T,V,R,"Response data format error,data must be array!");return}if(U&&U.length<=0){}else{if(S.async.dataSourceType==="onceRemote"||S.async.dataSourceType==="remote"){S._originalDataStore=B.extend(true,[],U);if(!S.view.isOnActionIgnoreFilter){p.call(T,T.value)}else{O.call(T,S._originalDataStore)}}else{S._originalDataStore=B.extend(true,[],U);O.call(T,S._originalDataStore)}}S._isLoaded=true;S._actionStop=true;S.hideLoadingBar.call(T);if(B.isFunction(S.callback.afterLoad)){S.callback.afterLoad.call(T,S._originalDataStore)}if(!S._justReload){S.showDropDown.call(T,true)}else{S._justReload=false}},M=function(V,R,S){var U=this,T=U.p;if(B.isFunction(T.callback.afterAjaxError)){T.callback.afterAjaxError.call(U,V,R,S)}V=null;T.hideLoadingBar.call(U);throw new Error("Request error:"+S)},Q=function(){var S=this,R=S.p;if(!B.isArray(R.view.localData)){M.call(S,null,null,"Response data format error,data must be array!");return}R.showLoadingBar.call(S);R._originalDataStore=B.extend(true,[],R.view.localData);O.call(S,R._originalDataStore);if(!R._justReload){R.showDropDown.call(S,true)}else{R._justReload=false}R._isLoaded=true;if(B.isFunction(R.callback.afterLoad)){R.callback.afterLoad.call(S,R._originalDataStore)}R._actionStop=true;R.hideLoadingBar.call(S)},O=function(R){var T=this,S=T.p,Z=B(T),aa,Y,V,W,U;S.removeAllNodes.call(T);if(S.treeConfig.check.enable&&Z.val()&&Z.val().length>0){aa=Z.val().split(S.view.separator);for(W=0;W<R.length;W++){V=R[W];for(U=0;U<aa.length;U++){Y=aa[U];if(V[S.view.viewUniqueFieldName]===Y){V.checked=true;break}}}}if(S.async.dataSourceType==="local"){var X=S.getTreeId.call(T);B.fn.zTree.init(B("#"+X),S.getTreeObj.call(T).setting,S.view.localData)}else{S.getTreeObj.call(T).addNodes(null,R)}},r=function(V,R){var Z=this,S=Z.p,U=S.getTreeObj.call(Z),ab=U.setting,ad=[],X=[],W=[],T,ac,aa,Y;if(S.view.inputFilterFieldNames.length===0){ad.push(ab.data.key.name)}else{ad=B.extend(true,[],S.view.inputFilterFieldNames)}for(aa=0;aa<R.length;aa++){T=R[aa];W=[];ac=T[ab.data.key.children];if(ac&&ac.length>0){W=r.call(Z,V,ac);if(W.length>0){X.push(T);X=X.concat(W)}else{for(Y=0;Y<ad.length;Y++){if(T[ad[Y]]&&T[ad[Y]].indexOf(V)>-1){X.push(T);break}}}}else{for(Y=0;Y<ad.length;Y++){if(T[ad[Y]]&&T[ad[Y]].indexOf(V)>-1){X.push(T);break}}}}return X.concat(W)},m=function(R){R.trigger("click")},a=function(){var U=this,T=U.p;T.treeConfig.callback=T.treeConfig.callback?T.treeConfig.callback:{};var V=function(W,ab,ae,ac){var aa=this,X=aa.p,Z,af,ad=X.view.bindFill,Y=X.getTreeObj.call(aa);if(!X.treeConfig.check.enable){if(!B.isEmptyObject(ad)){for(Z in ad){if(ad[Z]&&ad.hasOwnProperty(Z)){af=ad[Z];B(Z).val(ae[af])}}}}else{Y.checkNode(ae,!ae.checked,false,true)}},R=function(){var Y=this,X=Y.p,W=B(Y);if(X.view.isRememberValue){X._isCurrentValueFromTree=true;X._rememberValue=W.val();X._isAlreadyRemember=true}X.hideDropDown.call(Y)};if(T.treeConfig.callback.onClick){T.treeConfig.callback.onClickHandle=T.treeConfig.callback.onClick;T.treeConfig.callback.onClick=function(X,Z,Y,W){V.call(U,X,Z,Y,W);T.treeConfig.callback.onClickHandle.call(U,X,Z,Y,W);R.call(U,X,Z,Y,W)}}else{T.treeConfig.callback.onClick=function(Y,aa,Z,X){var W=T.getTreeObj.call(U);V.call(U,Y,aa,Z,X);R.call(U,Y,aa,Z,X);if(T.treeConfig.check.enable){W.checkNode(Z,true,false,true)}}}var S=function(W,aa,ab){var Z=this,X=Z.p,Y=X.getTreeObj.call(Z),ae,ad,ac="";if(X.treeConfig.check.enable){ae=Y.getCheckedNodes(true);x.call(Z,ae);if(ab.checked){X._checkedNodeStore[ab[X.view.viewUniqueFieldName]]=ab}else{delete X._checkedNodeStore[ab[X.view.viewUniqueFieldName]]}if(X.view.checkedSyncValue){for(ad in X._checkedNodeStore){ac+=(ad+X.view.separator)}Z.value=ac;C.call(Z)}}};if(T.treeConfig.callback.onCheck){T.treeConfig.callback.onCheckHandle=T.treeConfig.callback.onCheck;T.treeConfig.callback.onCheck=function(W,Y,X){T.treeConfig.callback.onCheckHandle.call(U,W,Y,X);S.call(U,W,Y,X)}}else{T.treeConfig.callback.onCheck=function(W,Y,X){S.call(U,W,Y,X)}}},q=function(){var V=this,U=V.p,S,R,T;S=U.getTreeObj.call(V);T=function(W){if(W.getParentNode()){if(!W.getParentNode().isHidden&&W.getParentNode().open){if(W.getParentNode().getParentNode()){return T(W.getParentNode())}return true}else{return false}}return false};R=S.getNodesByFilter(function(W){if(!W.isHidden){if(W.getParentNode()){return T(W)}else{return true}}return false});return R},N=function(R){var U=this,T=U.p,S=B(U);if(T._actionStop){T._actionStop=false}else{return}if(R&&R.type==="focus"){if(R.relatedTarget){}else{T._actionStop=true;return}}if(T==null){T._actionStop=true;return}if(T.isDropDownShow){T._actionStop=true;return}if(S.prop("readonly")&&!T.view.isAllowReadonlyAction){T._actionStop=true;return}if(S.val()&&T.view.isRememberValue){T._isCurrentValueFromTree=true;T._isAlreadyRemember=true;T._rememberValue=S.val()}if(T.callback.beforeAction&&!T.callback.beforeAction.call(U,R)){T._actionStop=true;return}if(T.treeConfig.check.enable){}if(!T._isLoaded){b.call(U)}else{if(!T.view.isOnActionIgnoreFilter){f.call(U,S.val())}else{f.call(U,"")}}if(T.callback.afterAction){T.callback.afterAction.call(U,R)}},t=function(){var T=this,S=T.p,U=S.id+"DropDown",R=B(S.view.dropDownContainer);S._dropDown=B("#"+U);if(S._dropDown&&S._dropDown.length>0){}else{if(R&&R.length>0){S._dropDown=R.addClass("autoTree-dropDown").css({width:S.view.width,height:S.view.height,overflow:"auto"});S._dropDown.show()}else{S._dropDown=B('<div id="'+U+'" class="autoTree-dropDown"></div>');B(S.view.dropDownWithin).append(S._dropDown)}}if(S._dataPanel&&S._dataPanel.length>0){}else{S._dropDown.append(D.call(T))}if(S._loadingBar&&S._loadingBar.length>0){}else{S._dropDown.append(E.call(T))}if(S.view.showClearButton){if(S._clearBtn&&S._clearBtn.length>0){}else{J.call(T)}}A.call(T);return S._dropDown},D=function(){var S=this,R=S.p,T=R.id+"DataPanel";R._dataPanel=B("#"+T);if(R._dataPanel&&R._dataPanel.length>0){}else{R._dataPanel=B('<div id="'+T+'"><ul id="'+R.getTreeId.call(S)+'" class="ztree"></ul></div>');B(document.body).append(R._dataPanel)}return R._dataPanel},p=function(R){return B(this).each(function(){var V=this,U=V.p,T=U.getTreeObj.call(V),W,S=T.getNodes();if(R&&R.length>0){U.hideTreeNodes.call(V,S);W=r.call(V,R,S);if(W&&W.length>0){T.showNodes(W)}}else{U.showTreeNodes.call(V,S,true)}})},L=function(R){if(console){if(console.hasOwnProperty("info")){console.info(R)}else{if(console.hasOwnProperty("log")){console.log(R)}}}},z=function(R){if(console){if(console.hasOwnProperty("warn")){console.warn(R)}else{if(console.hasOwnProperty("log")){console.log(R)}}}}})(jQuery);var AutoTreeUtil=AutoTreeUtil||{render:function(){$("input[componentType='auto-tree']").each(function(index,inputEl){var $inputEl=$(inputEl),componentConfigName=$inputEl.attr("componentConfig"),componentConfigExt=$inputEl.attr("componentConfigExt"),bindFill=$inputEl.attr("bindFill")?JSON.parse($inputEl.attr("bindFill")):{},componentConfig={};if(!componentConfig){return}if($.isFunction(AutoTreeUtil[componentConfigName])){componentConfig=AutoTreeUtil[componentConfigName].call(AutoTreeUtil)}else{if($.isPlainObject(AutoTreeUtil[componentConfigName])){componentConfig=AutoTreeUtil[componentConfigName]}}if($.isFunction(eval(componentConfigExt))){componentConfig=$.extend(true,{},componentConfig,{view:{bindFill:bindFill}},eval(componentConfigExt)())}else{componentConfig=$.extend(true,{},componentConfig,{view:{bindFill:bindFill}},eval(componentConfigExt))}$inputEl.AutoTree(componentConfig)});$("[componentType='auto-tree-trigger']").each(function(index,elm){var $elm=$(elm),triggerElementId=$elm.attr("triggerElementId");if(triggerElementId){$elm.bind("click",function(event){$("#"+triggerElementId).AutoTree("triggerAction",event)})}else{alert("没有配置triggerElementId")}})}};$.extend(true,$.autoTree,{defaultConfig:{view:{emptyRecordsHtml:"No Record!"}},i18n:{info:{keepTheLastOneNodeData:"Tree node data {0} have more than one, Keep the last one node data!"}}});